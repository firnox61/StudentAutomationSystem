@model List<StudentAutomationMVC.Web.Models.Grades.GradeListDto>
@{
    ViewData["Title"] = "Notlar";
}

<div class="d-flex align-items-center justify-content-between mb-3">
    <h3 class="m-0">Notlar</h3>
    <a asp-action="Create" class="btn btn-primary">
        <i class="bi bi-plus-lg"></i> Yeni Not
    </a>
</div>

@await Html.PartialAsync("~/Views/Shared/_Alerts.cshtml")

<div class="table-responsive">
    <table class="table align-middle" id="gradesTable">
        <thead class="table-light">
            <tr>
                <th>Öğrenci</th>
                <th>Ders</th>
                <th>Tür</th>
                <th>Not</th>
                <th>Dönem</th>
                <th style="width: 180px"></th>
            </tr>
        </thead>
        <tbody>
            @if (Model?.Any() == true)
            {
                foreach (var g in Model)
                {
                    <tr>
                        <td>@(string.IsNullOrWhiteSpace(g.StudentFullName) ? $"(#{g.StudentId})" : g.StudentFullName)</td>
                        <td>
                            @(string.IsNullOrWhiteSpace(g.CourseCode) && string.IsNullOrWhiteSpace(g.CourseName)
                                                ? $"(#{g.CourseId})"
                                                : $"{g.CourseCode} - {g.CourseName}")
                </td>
                <td>@g.Type</td>
                <td>@g.Value</td>
                <td>@g.Term</td>
                <td class="text-end">
                    <div class="btn-group" style="white-space:nowrap">
                        <a asp-action="Details" asp-route-id="@g.Id" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-eye"></i> <span class="d-none d-sm-inline">Detay</span>
                        </a>
                        <a asp-action="Edit" asp-route-id="@g.Id" class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-pencil"></i> <span class="d-none d-sm-inline">Düzenle</span>
                        </a>
                        <a asp-action="Delete" asp-route-id="@g.Id" class="btn btn-outline-danger btn-sm">
                            <i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Sil</span>
                        </a>
                    </div>
                </td>
            </tr>
                        }
            }
            else
            {
                <tr><td colspan="6" class="text-center text-muted py-4">Kayıt bulunamadı.</td></tr>
            }
        </tbody>
    </table>
</div>
